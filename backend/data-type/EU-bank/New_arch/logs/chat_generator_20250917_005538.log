2025-09-17 00:55:38,442 - INFO - EU Banking Chat Content Generator Starting...
2025-09-17 00:55:38,443 - INFO - Database: sparzaai
2025-09-17 00:55:38,443 - INFO - Collection: chatmessages
2025-09-17 00:55:38,443 - INFO - Model: google/gemma-3-27b-it:free
2025-09-17 00:55:38,444 - INFO - OpenRouter URL: https://openrouter.ai/api/v1/chat/completions
2025-09-17 00:55:38,444 - INFO - Max Workers: 2
2025-09-17 00:55:38,444 - INFO - Batch Size: 3
2025-09-17 00:55:38,444 - INFO - Log Directory: logs
2025-09-17 00:55:40,512 - INFO - Database connection established and indexes created
2025-09-17 00:55:41,275 - INFO - Collection Statistics:
2025-09-17 00:55:41,277 - INFO - Total chats: 600
2025-09-17 00:55:41,282 - INFO - With analysis fields: 0
2025-09-17 00:55:41,282 - INFO - Without analysis fields: 600
2025-09-17 00:55:41,282 - INFO - Top Dominant Topics:
2025-09-17 00:55:41,283 - INFO - 1. Attendance Management Alert: 16 chats
2025-09-17 00:55:41,284 - INFO - 2. Network Performance Issue: 16 chats
2025-09-17 00:55:41,284 - INFO - 3. Software Issue Resolution: 14 chats
2025-09-17 00:55:41,285 - INFO - 4. Compliance Monitoring Update: 14 chats
2025-09-17 00:55:41,285 - INFO - 5. Documentation Request Alert: 14 chats
2025-09-17 00:55:41,285 - INFO - 6. Monthly Compliance Audit: 14 chats
2025-09-17 00:55:41,286 - INFO - 7. Technology Provider Communication: 13 chats
2025-09-17 00:55:41,286 - INFO - 8. Pipeline Management Discussion: 13 chats
2025-09-17 00:55:41,286 - INFO - 9. Financial Reporting Procedure: 13 chats
2025-09-17 00:55:41,287 - INFO - 10. Risk Assessment Update: 13 chats
2025-09-17 00:55:41,288 - INFO - No pending intermediate results to recover
2025-09-17 00:55:41,288 - INFO - Starting EU Banking Chat Content Generation...
2025-09-17 00:55:41,288 - INFO - System Info: 16 CPU cores detected
2025-09-17 00:55:41,288 - INFO - Batch size: 3
2025-09-17 00:55:41,288 - INFO - Max workers: 2
2025-09-17 00:55:41,289 - INFO - Request timeout: 120s
2025-09-17 00:55:41,289 - INFO - Max retries per request: 5
2025-09-17 00:55:41,289 - INFO - Testing connection to OpenRouter: https://openrouter.ai/api/v1/chat/completions
2025-09-17 00:55:41,290 - INFO - Testing simple generation...
2025-09-17 00:55:44,593 - INFO - Generation test status: 200
2025-09-17 00:55:44,594 - INFO - OpenRouter connection test successful
2025-09-17 00:55:44,595 - INFO - Test response: ```json
{
  "test": "success"
}
```
...
2025-09-17 00:55:44,596 - INFO - Fetching chat records from database...
2025-09-17 00:55:47,094 - INFO - Found 600 chats needing content generation
2025-09-17 00:55:47,094 - INFO - Processing in 200 batches of 3 chats each
2025-09-17 00:55:47,094 - INFO - Processing batch 1/200 (3 chats)...
2025-09-17 00:56:36,034 - ERROR - Task processing error for 19:b9dfb1c6a2fc7d4fbac36afc@thread.v2: Missing required field: chat_data
2025-09-17 00:57:18,273 - ERROR - Task processing error for 19:deefca54f22297d217c940eb@thread.v2: Missing required field: chat_data
2025-09-17 00:57:22,590 - ERROR - Task processing error for 19:ba15dbb16d84065ae18d10ad@thread.v2: Missing required field: chat_data
2025-09-17 00:57:22,591 - INFO - Batch 1 processing complete: 0/3 successful
2025-09-17 00:57:22,592 - INFO - Batch duration: 95.50s
2025-09-17 00:57:27,594 - INFO - Processing batch 2/200 (3 chats)...
2025-09-17 00:59:37,999 - ERROR - Task processing error for 19:543d858bbe5014ca52eb67d8@thread.v2: No matching closing brace found in LLM response
2025-09-17 00:59:38,000 - INFO - Received signal 2. Initiating graceful shutdown...
2025-09-17 00:59:38,002 - INFO - Please wait for current operations to complete...
2025-09-17 00:59:38,006 - WARNING - Cancelling remaining tasks...
2025-09-17 00:59:48,526 - ERROR - Task processing error for 19:16adc0b3fbdb453575026d18@thread.v2: No matching closing brace found in LLM response
2025-09-17 01:01:44,002 - ERROR - OpenRouter API error: Response ended prematurely
2025-09-17 01:01:44,005 - INFO - Backing off call_openrouter_with_backoff(...) for 0.4s (requests.exceptions.ChunkedEncodingError: Response ended prematurely)
2025-09-17 01:01:44,005 - WARNING - Retry 1/5 after 0.4s
2025-09-17 01:01:44,368 - INFO - Batch 2 processing complete: 0/3 successful
2025-09-17 01:01:44,369 - INFO - Batch duration: 256.77s
2025-09-17 01:01:44,370 - INFO - Shutdown requested. Stopping at batch 2/200
2025-09-17 01:01:44,370 - INFO - Content generation interrupted gracefully!
2025-09-17 01:01:44,371 - INFO - Total chats updated: 0
2025-09-17 01:01:44,372 - INFO - Successful generations: 0
2025-09-17 01:01:44,372 - INFO - Failed generations: 5
2025-09-17 01:01:44,373 - INFO - Data updated in MongoDB: sparzaai.chatmessages
2025-09-17 01:01:45,133 - INFO - Collection Statistics:
2025-09-17 01:01:45,133 - INFO - Total chats: 600
2025-09-17 01:01:45,133 - INFO - With analysis fields: 0
2025-09-17 01:01:45,134 - INFO - Without analysis fields: 600
2025-09-17 01:01:45,134 - INFO - Top Dominant Topics:
2025-09-17 01:01:45,134 - INFO - 1. Attendance Management Alert: 16 chats
2025-09-17 01:01:45,135 - INFO - 2. Network Performance Issue: 16 chats
2025-09-17 01:01:45,135 - INFO - 3. Software Issue Resolution: 14 chats
2025-09-17 01:01:45,135 - INFO - 4. Compliance Monitoring Update: 14 chats
2025-09-17 01:01:45,135 - INFO - 5. Documentation Request Alert: 14 chats
2025-09-17 01:01:45,136 - INFO - 6. Monthly Compliance Audit: 14 chats
2025-09-17 01:01:45,136 - INFO - 7. Technology Provider Communication: 13 chats
2025-09-17 01:01:45,136 - INFO - 8. Pipeline Management Discussion: 13 chats
2025-09-17 01:01:45,137 - INFO - 9. Financial Reporting Procedure: 13 chats
2025-09-17 01:01:45,137 - INFO - 10. Risk Assessment Update: 13 chats
2025-09-17 01:01:45,404 - INFO - Sample Generated Chat Content:
2025-09-17 01:01:45,652 - INFO - Content validation complete: 0 issues found
2025-09-17 01:01:46,152 - INFO - Status report generated: logs\status_report_20250917_010145.json
2025-09-17 01:01:46,154 - INFO - Final session report:
2025-09-17 01:01:46,154 - INFO - Success Rate: 0.00%
2025-09-17 01:01:46,155 - INFO - Database Completion: 0.00%
2025-09-17 01:01:46,414 - INFO - Database connection closed
2025-09-17 01:01:46,414 - INFO - Session complete. Check log files for detailed information:
2025-09-17 01:01:46,415 - INFO - Main Log: logs\chat_generator_20250917_005538.log
2025-09-17 01:01:46,415 - INFO - Success Log: logs\successful_generations_20250917_005538.log
2025-09-17 01:01:46,416 - INFO - Failure Log: logs\failed_generations_20250917_005538.log
2025-09-17 01:01:46,416 - INFO - Progress Log: logs\progress_20250917_005538.log
2025-09-17 01:01:46,416 - INFO - Intermediate Results: logs\intermediate_results_20250917_005538.json
2025-09-17 01:01:46,417 - INFO - Database connection closed
